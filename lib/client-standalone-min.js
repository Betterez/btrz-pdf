!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).BtrzPdf=t()}}((function(){var t,e,r={exports:{}};t=this,e=function(t){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,r)};function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n=function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{u(n.next(t))}catch(e){o(e)}}function a(t){try{u(n.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))}function o(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function u(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}var c=function(){function t(){}return t.prototype.valueOf=function(){},t.prototype.liquidMethodMissing=function(t){},t}(),l=Object.prototype.toString,h=String.prototype.toLowerCase;function p(t){return"string"==typeof t}function f(t){return"function"==typeof t}function d(t){return p(t=v(t))?t:y(t)?"":String(t)}function v(t){return t instanceof c?t.valueOf():t}function g(t){return"number"==typeof t}function y(t){return null==t}function m(t){return"[object Array]"===l.call(t)}function w(t,e){for(var r in t=t||{})if(Object.hasOwnProperty.call(t,r)&&!1===e(t[r],r,t))break;return t}function b(t){return t[t.length-1]}function T(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function k(t,e,r){void 0===r&&(r=1);for(var n=[],i=t;i<e;i+=r)n.push(i);return n}function x(t,e,r){return void 0===r&&(r=" "),O(t,e,r,(function(t,e){return e+t}))}function O(t,e,r,n){for(var i=e-(t=String(t)).length;i-- >0;)t=n(t,r);return t}function q(t){return t}function S(t){return t.replace(/(\w?)([A-Z])/g,(function(t,e,r){return(e?e+"_":"")+r.toLowerCase()}))}function F(t,e){return null==t&&null==e?0:null==t?1:null==e||(t=h.call(t))<(e=h.call(e))?-1:t>e?1:0}var R=function(t,e,r,n){this.key=t,this.value=e,this.next=r,this.prev=n},L=function(){function t(t,e){void 0===e&&(e=0),this.limit=t,this.size=e,this.cache={},this.head=new R("HEAD",null,null,null),this.tail=new R("TAIL",null,null,null),this.head.next=this.tail,this.tail.prev=this.head}return t.prototype.write=function(t,e){if(this.cache[t])this.cache[t].value=e;else{var r=new R(t,e,this.head.next,this.head);this.head.next.prev=r,this.head.next=r,this.cache[t]=r,this.size++,this.ensureLimit()}},t.prototype.read=function(t){if(this.cache[t]){var e=this.cache[t].value;return this.remove(t),this.write(t,e),e}},t.prototype.remove=function(t){var e=this.cache[t];e.prev.next=e.next,e.next.prev=e.prev,delete this.cache[t],this.size--},t.prototype.clear=function(){this.head.next=this.tail,this.tail.prev=this.head,this.size=0,this.cache={}},t.prototype.ensureLimit=function(){this.size>this.limit&&this.remove(this.tail.prev.key)},t}();function E(t,e){var r=document.createElement("base");r.href=t;var n=document.getElementsByTagName("head")[0];n.insertBefore(r,n.firstChild);var i=document.createElement("a");i.href=e;var o=i.href;return n.removeChild(r),o}var P=Object.freeze({__proto__:null,resolve:function(t,e,r){return t.length&&"/"!==b(t)&&(t+="/"),E(t,e).replace(/^(\w+:\/\/[^/]+)(\/[^?]+)/,(function(t,e,n){var i=n.split("/").pop();return/\.\w+$/.test(i)?t:e+n+r}))},readFile:function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e,r){var n=new XMLHttpRequest;n.onload=function(){n.status>=200&&n.status<300?e(n.responseText):r(new Error(n.statusText))},n.onerror=function(){r(new Error("An error occurred whilst receiving the response."))},n.open("GET",t),n.send()}))]}))}))},readFileSync:function(t){var e=new XMLHttpRequest;if(e.open("GET",t,!1),e.send(),e.status<200||e.status>=300)throw new Error(e.statusText);return e.responseText},exists:function(t){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,!0]}))}))},existsSync:function(t){return!0},dirname:function(t){return E(t,".")},sep:"/"});function D(t){return t&&f(t.equals)}function M(t,e){return!N(t,e)}function N(t,e){return e.opts.jsTruthy?!t:!1===t||null==t}var _={"==":function(t,e){return D(t)?t.equals(e):D(e)?e.equals(t):t===e},"!=":function(t,e){return D(t)?!t.equals(e):D(e)?!e.equals(t):t!==e},">":function(t,e){return D(t)?t.gt(e):D(e)?e.lt(t):t>e},"<":function(t,e){return D(t)?t.lt(e):D(e)?e.gt(t):t<e},">=":function(t,e){return D(t)?t.geq(e):D(e)?e.leq(t):t>=e},"<=":function(t,e){return D(t)?t.leq(e):D(e)?e.geq(t):t<=e},contains:function(t,e){return!(!t||!f(t.indexOf))&&t.indexOf(e)>-1},and:function(t,e,r){return M(t,r)&&M(e,r)},or:function(t,e,r){return M(t,r)||M(e,r)}},A=[0,0,0,0,0,0,0,0,0,20,4,4,4,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,2,8,0,0,0,0,8,0,0,0,64,0,65,0,0,33,33,33,33,33,33,33,33,33,33,0,0,2,2,2,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0];function z(t){var e,r,n={};try{for(var i=s(Object.entries(t)),o=i.next();!o.done;o=i.next()){for(var u=a(o.value,2),c=u[0],l=u[1],h=n,p=0;p<c.length;p++){var f=c[p];h[f]=h[f]||{},p===c.length-1&&1&A[c.charCodeAt(p)]&&(h[f].needBoundary=!0),h=h[f]}h.handler=l,h.end=!0}}catch(d){e={error:d}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}A[160]=A[5760]=A[6158]=A[8192]=A[8193]=A[8194]=A[8195]=A[8196]=A[8197]=A[8198]=A[8199]=A[8200]=A[8201]=A[8202]=A[8232]=A[8233]=A[8239]=A[8287]=A[12288]=4;var j={root:["."],layouts:["."],partials:["."],relativeReference:!0,cache:void 0,extname:"",fs:P,dynamicPartials:!0,jsTruthy:!1,trimTagRight:!1,trimTagLeft:!1,trimOutputRight:!1,trimOutputLeft:!1,greedy:!0,tagDelimiterLeft:"{%",tagDelimiterRight:"%}",outputDelimiterLeft:"{{",outputDelimiterRight:"}}",preserveTimezones:!1,strictFilters:!1,strictVariables:!1,lenientIf:!1,globals:{},keepOutputType:!1,operators:_,operatorsTrie:z(_)};function I(t){var e=[];return m(t)&&(e=t),p(t)&&(e=[t]),e}var V,B=function(t){function e(e,r){var n=t.call(this,e.message)||this;return n.originalError=e,n.token=r,n.context="",n}return r(e,t),e.prototype.update=function(){var t,e,r,n,i=this.originalError;this.context=(t=this.token,e=a(t.getPosition(),1)[0],r=t.input.split("\n"),k(Math.max(e-2,1),(n=Math.min(e+3,r.length))+1).map((function(t){var i=t===e?">> ":"   ",o=x(String(t),String(n).length),s=r[t-1];return"".concat(i).concat(o,"| ").concat(s)})).join("\n")),this.message=function(t,e){e.file&&(t+=", file:".concat(e.file));var r=a(e.getPosition(),2),n=r[0],i=r[1];return t+", line:".concat(n,", col:").concat(i)}(i.message,this.token),this.stack=this.message+"\n"+this.context+"\n"+this.stack+"\nFrom "+i.stack},e}(Error),C=function(t){function e(e,r){var n=t.call(this,new Error(e),r)||this;return n.name="TokenizationError",t.prototype.update.call(n),n}return r(e,t),e}(B),H=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.name="ParseError",n.message=e.message,t.prototype.update.call(n),n}return r(e,t),e}(B),K=function(t){function e(e,r){var n=t.call(this,e,r.token)||this;return n.name="RenderError",n.message=e.message,t.prototype.update.call(n),n}return r(e,t),e.is=function(t){return"RenderError"===t.name},e}(B),U=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.name="UndefinedVariableError",n.message=e.message,t.prototype.update.call(n),n}return r(e,t),e}(B),Q=function(t){function e(e){var r=t.call(this,"undefined variable: ".concat(e))||this;return r.name="InternalUndefinedVariableError",r.variableName=e,r}return r(e,t),e}(Error),W=(function(t){function e(e){var r=t.call(this,e)||this;return r.name="AssertionError",r.message=e+"",r}r(e,t)}(Error),function(){function t(t,e,r){var n,i;void 0===t&&(t={}),void 0===e&&(e=j),void 0===r&&(r={}),this.scopes=[{}],this.registers={},this.sync=!!r.sync,this.opts=e,this.globals=null!==(n=r.globals)&&void 0!==n?n:e.globals,this.environments=t,this.strictVariables=null!==(i=r.strictVariables)&&void 0!==i?i:this.opts.strictVariables}return t.prototype.getRegister=function(t){return this.registers[t]=this.registers[t]||{}},t.prototype.setRegister=function(t,e){return this.registers[t]=e},t.prototype.saveRegister=function(){for(var t=this,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.map((function(e){return[e,t.getRegister(e)]}))},t.prototype.restoreRegister=function(t){var e=this;return t.forEach((function(t){var r=a(t,2),n=r[0],i=r[1];return e.setRegister(n,i)}))},t.prototype.getAll=function(){return u([this.globals,this.environments],a(this.scopes),!1).reduce((function(t,e){return n(t,e)}),{})},t.prototype.get=function(t){var e=this.findScope(t[0]);return this.getFromScope(e,t)},t.prototype.getFromScope=function(t,e){var r=this;return"string"==typeof e&&(e=e.split(".")),e.reduce((function(t,e){if(i=e,t=y(n=t)?n:(n=function t(e){return e&&f(e.toLiquid)?t(e.toLiquid()):e}(n),f(n[i])?n[i]():n instanceof c?n.hasOwnProperty(i)?n[i]:n.liquidMethodMissing(i):"size"===i?function(t){return t.hasOwnProperty("size")||void 0!==t.size?t.size:m(t)||p(t)?t.length:"object"==typeof t?Object.keys(t).length:void 0}(n):"first"===i?function(t){return m(t)?t[0]:t.first}(n):"last"===i?function(t){return m(t)?t[t.length-1]:t.last}(n):n[i]),y(t)&&r.strictVariables)throw new Q(e);var n,i;return t}),t)},t.prototype.push=function(t){return this.scopes.push(t)},t.prototype.pop=function(){return this.scopes.pop()},t.prototype.bottom=function(){return this.scopes[0]},t.prototype.findScope=function(t){for(var e=this.scopes.length-1;e>=0;e--){var r=this.scopes[e];if(t in r)return r}return t in this.environments?this.environments:this.globals},t}());!function(t){t.Partials="partials",t.Layouts="layouts",t.Root="root"}(V||(V={}));var J=function(){function t(t){if(this.options=t,t.relativeReference){var e=t.fs.sep,r=new RegExp(["."+e,".."+e,"./","../"].map((function(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")})).join("|"));this.shouldLoadRelative=function(t){return r.test(t)}}else this.shouldLoadRelative=function(t){return!1};this.contains=this.options.fs.contains||function(){return!0}}return t.prototype.lookup=function(t,e,r,n){var i,a,u,c,l,h,p,f,d;return o(this,(function(o){switch(o.label){case 0:i=this.options.fs,a=this.options[e],o.label=1;case 1:o.trys.push([1,8,9,10]),u=s(this.candidates(t,a,n,e!==V.Root)),c=u.next(),o.label=2;case 2:return c.done?[3,7]:(l=c.value,r?(h=i.existsSync(l),[3,5]):[3,3]);case 3:return[4,i.exists(l)];case 4:h=o.sent(),o.label=5;case 5:if(h)return[2,l];o.label=6;case 6:return c=u.next(),[3,2];case 7:return[3,10];case 8:return p=o.sent(),f={error:p},[3,10];case 9:try{c&&!c.done&&(d=u.return)&&d.call(u)}finally{if(f)throw f.error}return[7];case 10:throw this.lookupError(t,a)}}))},t.prototype.candidates=function(t,e,r,n){var i,a,u,c,l,h,p,f,d,v,g,y,m,w,b,T;return o(this,(function(o){switch(o.label){case 0:if(i=this.options,a=i.fs,u=i.extname,!this.shouldLoadRelative(t)||!r)return[3,8];v=a.resolve(this.dirname(r),t,u),o.label=1;case 1:o.trys.push([1,6,7,8]),c=s(e),l=c.next(),o.label=2;case 2:return l.done?[3,5]:(d=l.value,n&&!this.contains(d,v)?[3,4]:[4,v]);case 3:return o.sent(),[3,5];case 4:return l=c.next(),[3,2];case 5:return[3,8];case 6:return h=o.sent(),m={error:h},[3,8];case 7:try{l&&!l.done&&(w=c.return)&&w.call(c)}finally{if(m)throw m.error}return[7];case 8:o.trys.push([8,13,14,15]),p=s(e),f=p.next(),o.label=9;case 9:return f.done?[3,12]:(d=f.value,v=a.resolve(d,t,u),n&&!this.contains(d,v)?[3,11]:[4,v]);case 10:o.sent(),o.label=11;case 11:return f=p.next(),[3,9];case 12:return[3,15];case 13:return g=o.sent(),b={error:g},[3,15];case 14:try{f&&!f.done&&(T=p.return)&&T.call(p)}finally{if(b)throw b.error}return[7];case 15:return void 0===a.fallback||void 0===(y=a.fallback(t))?[3,17]:[4,y];case 16:o.sent(),o.label=17;case 17:return[2]}}))},t.prototype.dirname=function(t){return this.options.fs.dirname(t)},t.prototype.lookupError=function(t,e){var r=new Error("ENOENT");return r.message='ENOENT: Failed to lookup "'.concat(t,'" in "').concat(e,'"'),r.code="ENOENT",r},t}(),Y=function(){function t(){this.buffer=""}return t.prototype.write=function(t){this.buffer+=d(t)},t}(),$=function(){throw this.buffer="",this.stream=null,new Error("streaming not supported in browser")};function G(t){var e={then:function(e){return e(t)},catch:function(){return e}};return e}function X(t){var e={then:function(r,n){return n?n(t):e},catch:function(e){return e(t)}};return e}function Z(t){return function(t){return t&&f(t.then)}(t)?t:function(t){return t&&f(t.next)&&f(t.throw)&&f(t.return)}(t)?function e(r){var n;try{n=t.next(r)}catch(i){return X(i)}return n.done?G(n.value):Z(n.value).then(e,(function(r){var n;try{n=t.throw(r)}catch(i){return X(i)}return n.done?G(n.value):e(n.value)}))}():G(t)}function tt(t){return Promise.resolve(Z(t))}function et(t){var e;return Z(t).then((function(t){return G(e=t)})).catch((function(t){throw t})),e}var rt,nt=function(){function t(){this.buffer=""}return t.prototype.write=function(t){"string"!=typeof(t=v(t))&&""===this.buffer?this.buffer=t:this.buffer=d(this.buffer)+d(t)},t}(),it=function(){function t(){}return t.prototype.renderTemplatesToNodeStream=function(t,e){var r=this,n=new $;return Promise.resolve().then((function(){return Z(r.renderTemplates(t,e,n))})).then((function(){return n.end()}),(function(t){return n.error(t)})),n.stream},t.prototype.renderTemplates=function(t,e,r){var n,i,a,u,c,l,h,p;return o(this,(function(o){switch(o.label){case 0:r||(r=e.opts.keepOutputType?new nt:new Y),o.label=1;case 1:o.trys.push([1,8,9,10]),n=s(t),i=n.next(),o.label=2;case 2:if(i.done)return[3,7];a=i.value,o.label=3;case 3:return o.trys.push([3,5,,6]),[4,a.render(e,r)];case 4:return(u=o.sent())&&r.write(u),r.break||r.continue?[3,7]:[3,6];case 5:throw c=o.sent(),K.is(c)?c:new K(c,a);case 6:return i=n.next(),[3,2];case 7:return[3,10];case 8:return l=o.sent(),h={error:l},[3,10];case 9:try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(h)throw h.error}return[7];case 10:return[2,r.buffer]}}))},t}();function ot(e){return!!(gt(e)&t.TokenKind.Delimited)}function st(e){return gt(e)===t.TokenKind.Operator}function at(e){return gt(e)===t.TokenKind.HTML}function ut(e){return gt(e)===t.TokenKind.Output}function ct(e){return gt(e)===t.TokenKind.Tag}function lt(e){return gt(e)===t.TokenKind.Quoted}function ht(e){return gt(e)===t.TokenKind.Literal}function pt(e){return gt(e)===t.TokenKind.Number}function ft(e){return gt(e)===t.TokenKind.PropertyAccess}function dt(e){return gt(e)===t.TokenKind.Word}function vt(e){return gt(e)===t.TokenKind.Range}function gt(t){return t?t.kind:-1}t.TokenKind=void 0,(rt=t.TokenKind||(t.TokenKind={}))[rt.Number=1]="Number",rt[rt.Literal=2]="Literal",rt[rt.Tag=4]="Tag",rt[rt.Output=8]="Output",rt[rt.HTML=16]="HTML",rt[rt.Filter=32]="Filter",rt[rt.Hash=64]="Hash",rt[rt.PropertyAccess=128]="PropertyAccess",rt[rt.Word=256]="Word",rt[rt.Range=512]="Range",rt[rt.Quoted=1024]="Quoted",rt[rt.Operator=2048]="Operator",rt[rt.Delimited=12]="Delimited";Object.freeze({__proto__:null,isDelimitedToken:ot,isOperatorToken:st,isHTMLToken:at,isOutputToken:ut,isTagToken:ct,isQuotedToken:lt,isLiteralToken:ht,isNumberToken:pt,isPropertyAccessToken:ft,isWordToken:dt,isRangeToken:vt});var yt=function(){function t(t,e){this.handlers={},this.stopRequested=!1,this.tokens=t,this.parseToken=e}return t.prototype.on=function(t,e){return this.handlers[t]=e,this},t.prototype.trigger=function(t,e){var r=this.handlers[t];return!!r&&(r.call(this,e),!0)},t.prototype.start=function(){var t;for(this.trigger("start");!this.stopRequested&&(t=this.tokens.shift());)if(!(this.trigger("token",t)||ct(t)&&this.trigger("tag:".concat(t.name),t))){var e=this.parseToken(t,this.tokens);this.trigger("template",e)}return this.stopRequested||this.trigger("end"),this},t.prototype.stop=function(){return this.stopRequested=!0,this},t}(),mt=function(t){this.token=t},wt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.equals=function(t){return y(v(t))},e.prototype.gt=function(){return!1},e.prototype.geq=function(){return!1},e.prototype.lt=function(){return!1},e.prototype.leq=function(){return!1},e.prototype.valueOf=function(){return null},e}(c),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.equals=function(t){return!(t instanceof e||(p(t=v(t))||m(t)?0!==t.length:!T(t)||0!==Object.keys(t).length))},e.prototype.gt=function(){return!1},e.prototype.geq=function(){return!1},e.prototype.lt=function(){return!1},e.prototype.leq=function(){return!1},e.prototype.valueOf=function(){return""},e}(c),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.equals=function(e){return!1===e||!!y(v(e))||(p(e)?/^\s*$/.test(e):t.prototype.equals.call(this,e))},e}(bt),kt=new wt,xt={true:!0,false:!1,nil:kt,null:kt,empty:new bt,blank:new Tt},Ot=/[\da-fA-F]/,qt=/[0-7]/,St={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"};function Ft(t){var e=t.charCodeAt(0);return e>=97?e-87:e>=65?e-55:e-48}function Rt(t){for(var e="",r=1;r<t.length-1;r++)if("\\"===t[r])if(void 0!==St[t[r+1]])e+=St[t[++r]];else if("u"===t[r+1]){for(var n=0,i=r+2;i<=r+5&&Ot.test(t[i]);)n=16*n+Ft(t[i++]);r=i-1,e+=String.fromCharCode(n)}else if(qt.test(t[r+1])){for(i=r+1,n=0;i<=r+3&&qt.test(t[i]);)n=8*n+Ft(t[i++]);r=i-1,e+=String.fromCharCode(n)}else e+=t[++r];else e+=t[r];return e}var Lt=function(){function t(t){this.postfix=u([],a(function(t){var e,r,n,i,a,u,c;return o(this,(function(o){switch(o.label){case 0:e=[],o.label=1;case 1:o.trys.push([1,10,11,12]),r=s(t),n=r.next(),o.label=2;case 2:if(n.done)return[3,9];if(!st(i=n.value))return[3,6];o.label=3;case 3:return e.length&&e[e.length-1].getPrecedence()>i.getPrecedence()?[4,e.pop()]:[3,5];case 4:return o.sent(),[3,3];case 5:return e.push(i),[3,8];case 6:return[4,i];case 7:o.sent(),o.label=8;case 8:return n=r.next(),[3,2];case 9:return[3,12];case 10:return a=o.sent(),u={error:a},[3,12];case 11:try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}return[7];case 12:return e.length?[4,e.pop()]:[3,14];case 13:return o.sent(),[3,12];case 14:return[2]}}))}(t)),!1)}return t.prototype.evaluate=function(t,e){var r,n,i,a,u,c,l,h,p,f,d,v;return o(this,(function(o){switch(o.label){case 0:r=[],o.label=1;case 1:o.trys.push([1,9,10,11]),n=s(this.postfix),i=n.next(),o.label=2;case 2:return i.done?[3,8]:st(a=i.value)?[4,r.pop()]:[3,5];case 3:return u=o.sent(),[4,r.pop()];case 4:return c=o.sent(),l=function(t,e,r,n,i){return(0,t[e.operator])(r,n,i)}(t.opts.operators,a,c,u,t),r.push(l),[3,7];case 5:return p=(h=r).push,[4,Et(a,t,e&&1===this.postfix.length)];case 6:p.apply(h,[o.sent()]),o.label=7;case 7:return i=n.next(),[3,2];case 8:return[3,11];case 9:return f=o.sent(),d={error:f},[3,11];case 10:try{i&&!i.done&&(v=n.return)&&v.call(n)}finally{if(d)throw d.error}return[7];case 11:return[2,r[0]]}}))},t}();function Et(t,e,r){return void 0===r&&(r=!1),ft(t)?function(t,e,r){var n=t.props.map((function(t){return Et(t,e,!1)}));try{return e.get(u([t.propertyName],a(n),!1))}catch(i){if(r&&"InternalUndefinedVariableError"===i.name)return null;throw new U(i,t)}}(t,e,r):vt(t)?function(t,e){return k(+Et(t.lhs,e),+Et(t.rhs,e)+1)}(t,e):ht(t)?function(t){return xt[t.literal]}(t):pt(t)?function(t){var e=t.whole.content+"."+(t.decimal?t.decimal.content:"");return Number(e)}(t):dt(t)?t.getText():lt(t)?Pt(t):void 0}function Pt(t){return Rt(t.getText())}var Dt=function(){function t(t,e,r,n,i){this.kind=t,this.input=e,this.begin=r,this.end=n,this.file=i}return t.prototype.getText=function(){return this.input.slice(this.begin,this.end)},t.prototype.getPosition=function(){for(var t=a([1,1],2),e=t[0],r=t[1],n=0;n<this.begin;n++)"\n"===this.input[n]?(e++,r=1):r++;return[e,r]},t.prototype.size=function(){return this.end-this.begin},t}(),Mt=function(t){function e(e,r,n,i,o,s,a,u){var c=t.call(this,e,n,i,o,u)||this;c.trimLeft=!1,c.trimRight=!1,c.content=c.getText();var l="-"===r[0],h="-"===b(r);return c.content=r.slice(l?1:0,h?-1:r.length).trim(),c.trimLeft=l||s,c.trimRight=h||a,c}return r(e,t),e}(Dt);function Nt(t,e){if(t&&at(t))for(var r=e?4:16;A[t.input.charCodeAt(t.end-1-t.trimRight)]&r;)t.trimRight++}function _t(t,e){if(t&&at(t)){for(var r=e?4:16;A[t.input.charCodeAt(t.begin+t.trimLeft)]&r;)t.trimLeft++;"\n"===t.input.charAt(t.begin+t.trimLeft)&&t.trimLeft++}}var At=function(e){function n(r,n){var i=e.call(this,t.TokenKind.Number,r.input,r.begin,n?n.end:r.end,r.file)||this;return i.whole=r,i.decimal=n,i}return r(n,e),n}(Dt),zt=function(e){function n(r,n,i,o){var s=e.call(this,t.TokenKind.Word,r,n,i,o)||this;return s.input=r,s.begin=n,s.end=i,s.file=o,s.content=s.getText(),s}return r(n,e),n.prototype.isNumber=function(t){void 0===t&&(t=!1);for(var e=t&&64&A[this.input.charCodeAt(this.begin)]?this.begin+1:this.begin;e<this.end;e++)if(!(32&A[this.input.charCodeAt(e)]))return!1;return!0},n}(Dt),jt=function(e){function n(r,n,i,o){var s=e.call(this,t.TokenKind.Literal,r,n,i,o)||this;return s.input=r,s.begin=n,s.end=i,s.file=o,s.literal=s.getText(),s}return r(n,e),n}(Dt),It={"==":1,"!=":1,">":1,"<":1,">=":1,"<=":1,contains:1,and:0,or:0},Vt=function(e){function n(r,n,i,o){var s=e.call(this,t.TokenKind.Operator,r,n,i,o)||this;return s.input=r,s.begin=n,s.end=i,s.file=o,s.operator=s.getText(),s}return r(n,e),n.prototype.getPrecedence=function(){var t=this.getText();return t in It?It[t]:1},n}(Dt),Bt=function(e){function n(r,n,i){var o=e.call(this,t.TokenKind.PropertyAccess,r.input,r.begin,i,r.file)||this;return o.variable=r,o.props=n,o.propertyName=o.variable instanceof zt?o.variable.getText():Rt(o.variable.getText()),o}return r(n,e),n}(Dt),Ct=function(e){function n(r,n,i,o,s,a){var u=e.call(this,t.TokenKind.Filter,i,o,s,a)||this;return u.name=r,u.args=n,u}return r(n,e),n}(Dt),Ht=function(e){function n(r,n,i,o,s,a){var u=e.call(this,t.TokenKind.Hash,r,n,i,a)||this;return u.input=r,u.begin=n,u.end=i,u.name=o,u.value=s,u.file=a,u}return r(n,e),n}(Dt),Kt=function(e){function n(r,n,i,o){var s=e.call(this,t.TokenKind.Quoted,r,n,i,o)||this;return s.input=r,s.begin=n,s.end=i,s.file=o,s}return r(n,e),n}(Dt),Ut=function(e){function n(r,n,i,o){var s=e.call(this,t.TokenKind.HTML,r,n,i,o)||this;return s.input=r,s.begin=n,s.end=i,s.file=o,s.trimLeft=0,s.trimRight=0,s}return r(n,e),n.prototype.getContent=function(){return this.input.slice(this.begin+this.trimLeft,this.end-this.trimRight)},n}(Dt),Qt=function(e){function n(r,n,i,o,s,a){var u=e.call(this,t.TokenKind.Range,r,n,i,a)||this;return u.input=r,u.begin=n,u.end=i,u.lhs=o,u.rhs=s,u.file=a,u}return r(n,e),n}(Dt),Wt=function(e){function n(r,n,i,o,s){var a=o.trimOutputLeft,u=o.trimOutputRight,c=o.outputDelimiterLeft,l=o.outputDelimiterRight,h=r.slice(n+c.length,i-l.length);return e.call(this,t.TokenKind.Output,h,r,n,i,a,u,s)||this}return r(n,e),n}(Mt),Jt=function(){function t(t,e,r){void 0===r&&(r=""),this.input=t,this.trie=e,this.file=r,this.p=0,this.rawBeginAt=-1,this.N=t.length}return t.prototype.readExpression=function(){return new Lt(this.readExpressionTokens())},t.prototype.readExpressionTokens=function(){var t,e,r;return o(this,(function(n){switch(n.label){case 0:return(t=this.readValue())?[4,t]:[2];case 1:n.sent(),n.label=2;case 2:return this.p<this.N?(e=this.readOperator())&&(r=this.readValue())?[4,e]:[2]:[3,5];case 3:return n.sent(),[4,r];case 4:return n.sent(),[3,2];case 5:return[2]}}))},t.prototype.readOperator=function(){this.skipBlank();var t=function(t,e,r,n){void 0===n&&(n=t.length);for(var i,o=r,s=e;o[t[s]]&&s<n;)(o=o[t[s++]]).end&&(i=o);return i?i.needBoundary&&1&A[t.charCodeAt(s)]?-1:s:-1}(this.input,this.p,this.trie,this.p+8);if(-1!==t)return new Vt(this.input,this.p,this.p=t,this.file)},t.prototype.readFilters=function(){for(var t=[];;){var e=this.readFilter();if(!e)return t;t.push(e)}},t.prototype.readFilter=function(){if(this.skipBlank(),this.end())return null;this.p++;var t=this.p,e=this.readIdentifier();if(!e.size())return null;var r=[];if(this.skipBlank(),":"===this.peek())do{++this.p;var n=this.readFilterArg();for(n&&r.push(n);this.p<this.N&&","!==this.peek()&&"|"!==this.peek();)++this.p}while(","===this.peek());return new Ct(e.getText(),r,this.input,t,this.p,this.file)},t.prototype.readFilterArg=function(){var t=this.readValue();if(t){if(this.skipBlank(),":"!==this.peek())return t;++this.p;var e=this.readValue();return[t.getText(),e]}},t.prototype.readTopLevelTokens=function(t){void 0===t&&(t=j);for(var e=[];this.p<this.N;){var r=this.readTopLevelToken(t);e.push(r)}return function(t,e){for(var r=!1,n=0;n<t.length;n++){var i=t[n];ot(i)&&(!r&&i.trimLeft&&Nt(t[n-1],e.greedy),ct(i)&&("raw"===i.name?r=!0:"endraw"===i.name&&(r=!1)),!r&&i.trimRight&&_t(t[n+1],e.greedy))}}(e,t),e},t.prototype.readTopLevelToken=function(t){var e=t.tagDelimiterLeft,r=t.outputDelimiterLeft;return this.rawBeginAt>-1?this.readEndrawOrRawContent(t):this.match(e)?this.readTagToken(t):this.match(r)?this.readOutputToken(t):this.readHTMLToken(t)},t.prototype.readHTMLToken=function(t){for(var e=this.p;this.p<this.N;){var r=t.tagDelimiterLeft,n=t.outputDelimiterLeft;if(this.match(r))break;if(this.match(n))break;++this.p}return new Ut(this.input,e,this.p,this.file)},t.prototype.readTagToken=function(t){void 0===t&&(t=j);var e=this.file,r=this.input,n=this.p;if(-1===this.readToDelimiter(t.tagDelimiterRight))throw this.mkError("tag ".concat(this.snapshot(n)," not closed"),n);var i=new Yt(r,n,this.p,t,e);return"raw"===i.name&&(this.rawBeginAt=n),i},t.prototype.readToDelimiter=function(t){for(;this.p<this.N;)if(8&this.peekType())this.readQuoted();else if(++this.p,this.rmatch(t))return this.p;return-1},t.prototype.readOutputToken=function(t){void 0===t&&(t=j);var e=this.file,r=this.input,n=t.outputDelimiterRight,i=this.p;if(-1===this.readToDelimiter(n))throw this.mkError("output ".concat(this.snapshot(i)," not closed"),i);return new Wt(r,i,this.p,t,e)},t.prototype.readEndrawOrRawContent=function(t){for(var e=t.tagDelimiterLeft,r=t.tagDelimiterRight,n=this.p,i=this.readTo(e)-e.length;this.p<this.N;)if("endraw"===this.readIdentifier().getText())for(;this.p<=this.N;){if(this.rmatch(r)){var o=this.p;return n===i?(this.rawBeginAt=-1,new Yt(this.input,n,o,t,this.file)):(this.p=i,new Ut(this.input,n,i,this.file))}if(this.rmatch(e))break;this.p++}else i=this.readTo(e)-e.length;throw this.mkError("raw ".concat(this.snapshot(this.rawBeginAt)," not closed"),n)},t.prototype.mkError=function(t,e){return new C(t,new zt(this.input,e,this.N,this.file))},t.prototype.snapshot=function(t){return void 0===t&&(t=this.p),JSON.stringify((16,(e=this.input.slice(t)).length>16?e.substr(0,13)+"...":e));var e},t.prototype.readWord=function(){return console.warn("Tokenizer#readWord() will be removed, use #readIdentifier instead"),this.readIdentifier()},t.prototype.readIdentifier=function(){this.skipBlank();for(var t=this.p;1&this.peekType();)++this.p;return new zt(this.input,t,this.p,this.file)},t.prototype.readHashes=function(){for(var t=[];;){var e=this.readHash();if(!e)return t;t.push(e)}},t.prototype.readHash=function(){this.skipBlank(),","===this.peek()&&++this.p;var t,e=this.p,r=this.readIdentifier();if(r.size())return this.skipBlank(),":"===this.peek()&&(++this.p,t=this.readValue()),new Ht(this.input,e,this.p,r,t,this.file)},t.prototype.remaining=function(){return this.input.slice(this.p)},t.prototype.advance=function(t){void 0===t&&(t=1),this.p+=t},t.prototype.end=function(){return this.p>=this.N},t.prototype.readTo=function(t){for(;this.p<this.N;)if(++this.p,this.rmatch(t))return this.p;return-1},t.prototype.readValue=function(){var t=this.readQuoted()||this.readRange();if(t)return t;if("["===this.peek()){if(this.p++,!(i=this.readQuoted()))return;if("]"!==this.peek())return;return this.p++,new Bt(i,[],this.p)}var e=this.readIdentifier();if(e.size()){for(var r=e.isNumber(!0),n=[];;)if("["===this.peek()){r=!1,this.p++;var i=this.readValue()||new zt(this.input,this.p,this.p,this.file);this.readTo("]"),n.push(i)}else{if("."!==this.peek()||"."===this.peek(1))break;if(this.p++,!(i=this.readIdentifier()).size())break;i.isNumber()||(r=!1),n.push(i)}return!n.length&&xt.hasOwnProperty(e.content)?new jt(this.input,e.begin,e.end,this.file):r?new At(e,n[0]):new Bt(e,n,this.p)}},t.prototype.readRange=function(){this.skipBlank();var t=this.p;if("("===this.peek()){++this.p;var e=this.readValueOrThrow();this.p+=2;var r=this.readValueOrThrow();return++this.p,new Qt(this.input,t,this.p,e,r,this.file)}},t.prototype.readValueOrThrow=function(){return this.readValue()},t.prototype.readQuoted=function(){this.skipBlank();var t=this.p;if(8&this.peekType()){++this.p;for(var e=!1;this.p<this.N&&(++this.p,this.input[this.p-1]!==this.input[t]||e);)e?e=!1:"\\"===this.input[this.p-1]&&(e=!0);return new Kt(this.input,t,this.p,this.file)}},t.prototype.readFileName=function(){for(var t=this.p;!(4&this.peekType())&&","!==this.peek()&&this.p<this.N;)this.p++;return new zt(this.input,t,this.p,this.file)},t.prototype.match=function(t){for(var e=0;e<t.length;e++)if(t[e]!==this.input[this.p+e])return!1;return!0},t.prototype.rmatch=function(t){for(var e=0;e<t.length;e++)if(t[t.length-1-e]!==this.input[this.p-1-e])return!1;return!0},t.prototype.peekType=function(t){return void 0===t&&(t=0),A[this.input.charCodeAt(this.p+t)]},t.prototype.peek=function(t){return void 0===t&&(t=0),this.input[this.p+t]},t.prototype.skipBlank=function(){for(;4&this.peekType();)++this.p},t}(),Yt=function(e){function n(r,n,i,o,s){var a=this,u=o.trimTagLeft,c=o.trimTagRight,l=o.tagDelimiterLeft,h=o.tagDelimiterRight,p=r.slice(n+l.length,i-h.length);a=e.call(this,t.TokenKind.Tag,p,r,n,i,u,c,s)||this;var f=new Jt(a.content,o.operatorsTrie);if(a.name=f.readIdentifier().getText(),!a.name)throw new C("illegal tag syntax",a);return f.skipBlank(),a.args=f.remaining(),a}return r(n,e),n}(Mt),$t=function(){function t(t){var e,r;this.hash={};var n=new Jt(t,{});try{for(var i=s(n.readHashes()),o=i.next();!o.done;o=i.next()){var a=o.value;this.hash[a.name.content]=a.value}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}return t.prototype.render=function(t){var e,r,n,i,a,u,c,l,h,p;return o(this,(function(o){switch(o.label){case 0:e={},o.label=1;case 1:o.trys.push([1,8,9,10]),r=s(Object.keys(this.hash)),n=r.next(),o.label=2;case 2:return n.done?[3,7]:(i=n.value,a=e,u=i,void 0!==this.hash[i]?[3,3]:(c=!0,[3,5]));case 3:return[4,Et(this.hash[i],t)];case 4:c=o.sent(),o.label=5;case 5:a[u]=c,o.label=6;case 6:return n=r.next(),[3,2];case 7:return[3,10];case 8:return l=o.sent(),h={error:l},[3,10];case 9:try{n&&!n.done&&(p=r.return)&&p.call(r)}finally{if(h)throw h.error}return[7];case 10:return[2,e]}}))},t}(),Gt=function(){function t(t,e,r,n){this.name=t,this.impl=e||q,this.args=r,this.liquid=n}return t.prototype.render=function(t,e){var r,n,i=[];try{for(var o=s(this.args),c=o.next();!c.done;c=o.next()){var l=c.value;m(l)?i.push([l[0],Et(l[1],e)]):i.push(Et(l,e))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this.impl.apply({context:e,liquid:this.liquid},u([t],a(i),!1))},t}(),Xt=function(){function t(t,e){this.filters=[];var r=new Jt(t,e.options.operatorsTrie);this.initial=r.readExpression(),this.filters=r.readFilters().map((function(t){var r=t.name,n=t.args;return new Gt(r,e.filters.get(r),n,e)}))}return t.prototype.value=function(t,e){var r,n,i,a,u,c;return o(this,(function(o){switch(o.label){case 0:return e=e||t.opts.lenientIf&&this.filters.length>0&&"default"===this.filters[0].name,[4,this.initial.evaluate(t,e)];case 1:r=o.sent(),o.label=2;case 2:o.trys.push([2,7,8,9]),n=s(this.filters),i=n.next(),o.label=3;case 3:return i.done?[3,6]:[4,i.value.render(r,t)];case 4:r=o.sent(),o.label=5;case 5:return i=n.next(),[3,3];case 6:return[3,9];case 7:return a=o.sent(),u={error:a},[3,9];case 8:try{i&&!i.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}return[7];case 9:return[2,r]}}))},t}(),Zt=function(t){function e(e,r,n){var i=t.call(this,e)||this;i.name=e.name;var o=n.tags.get(e.name);return i.impl=Object.create(o),i.impl.liquid=n,i.impl.parse&&i.impl.parse(e,r),i}return r(e,t),e.prototype.render=function(t,e){var r,n;return o(this,(function(i){switch(i.label){case 0:return[4,new $t(this.token.args).render(t)];case 1:return r=i.sent(),f((n=this.impl).render)?[4,n.render(t,e,r)]:[3,3];case 2:return[2,i.sent()];case 3:return[2]}}))},e}(mt),te=function(t){function e(e,r){var n=t.call(this,e)||this;return n.value=new Xt(e.content,r),n}return r(e,t),e.prototype.render=function(t,e){var r;return o(this,(function(n){switch(n.label){case 0:return[4,this.value.value(t,!1)];case 1:return r=n.sent(),e.write(r),[2]}}))},e}(mt),ee=function(t){function e(e){var r=t.call(this,e)||this;return r.str=e.getContent(),r}return r(e,t),e.prototype.render=function(t,e){return o(this,(function(t){return e.write(this.str),[2]}))},e}(mt),re=function(){function t(t){this.liquid=t,this.cache=this.liquid.options.cache,this.fs=this.liquid.options.fs,this.parseFile=this.cache?this._parseFileCached:this._parseFile,this.loader=new J(this.liquid.options)}return t.prototype.parse=function(t,e){var r=new Jt(t,this.liquid.options.operatorsTrie,e).readTopLevelTokens(this.liquid.options);return this.parseTokens(r)},t.prototype.parseTokens=function(t){for(var e,r=[];e=t.shift();)r.push(this.parseToken(e,t));return r},t.prototype.parseToken=function(t,e){try{return ct(t)?new Zt(t,e,this.liquid):ut(t)?new te(t,this.liquid):new ee(t)}catch(r){throw new H(r,t)}},t.prototype.parseStream=function(t){var e=this;return new yt(t,(function(t,r){return e.parseToken(t,r)}))},t.prototype._parseFileCached=function(t,e,r,n){var i,s,a;return void 0===r&&(r=V.Root),o(this,(function(o){switch(o.label){case 0:return i=this.loader.shouldLoadRelative(t)?n+","+t:r+":"+t,[4,this.cache.read(i)];case 1:if(s=o.sent())return[2,s];a=Z(this._parseFile(t,e,r,n)),this.cache.write(i,a),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,a];case 3:return[2,o.sent()];case 4:return o.sent(),this.cache.remove(i),[3,5];case 5:return[2,[]]}}))},t.prototype._parseFile=function(t,e,r,n){var i,s,a,u;return void 0===r&&(r=V.Root),o(this,(function(o){switch(o.label){case 0:return[4,this.loader.lookup(t,r,e,n)];case 1:return i=o.sent(),a=(s=this.liquid).parse,e?(u=this.fs.readFileSync(i),[3,4]):[3,2];case 2:return[4,this.fs.readFile(i)];case 3:u=o.sent(),o.label=4;case 4:return[2,a.apply(s,[u,i])]}}))},t}(),ne={parse:function(t){var e=new Jt(t.args,this.liquid.options.operatorsTrie);this.key=e.readIdentifier().content,e.skipBlank(),e.advance(),this.value=e.remaining()},render:function(t){var e,r;return o(this,(function(n){switch(n.label){case 0:return e=t.bottom(),r=this.key,[4,this.liquid._evalValue(this.value,t)];case 1:return e[r]=n.sent(),[2]}}))}};function ie(t){return m(t)?t:p(t)&&t.length>0?[t]:T(t)?Object.keys(t).map((function(e){return[e,t[e]]})):[]}function oe(t){return m(t)?t:[t]}var se,ae=function(t){function e(e,r,n){var i=t.call(this)||this;return i.i=0,i.length=e,i.name="".concat(n,"-").concat(r),i}return r(e,t),e.prototype.next=function(){this.i++},e.prototype.index0=function(){return this.i},e.prototype.index=function(){return this.i+1},e.prototype.first=function(){return 0===this.i},e.prototype.last=function(){return this.i===this.length-1},e.prototype.rindex=function(){return this.length-this.i},e.prototype.rindex0=function(){return this.length-this.i-1},e.prototype.valueOf=function(){return JSON.stringify(this)},e}(c),ue=["offset","limit","reversed"],ce={type:"block",parse:function(t,e){var r,n=this,i=new Jt(t.args,this.liquid.options.operatorsTrie),o=i.readIdentifier(),s=(i.readIdentifier(),i.readValue());this.variable=o.content,this.collection=s,this.hash=new $t(i.remaining()),this.templates=[],this.elseTemplates=[];var a=this.liquid.parser.parseStream(e).on("start",(function(){return r=n.templates})).on("tag:else",(function(){return r=n.elseTemplates})).on("tag:endfor",(function(){return a.stop()})).on("template",(function(t){return r.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))}));a.start()},render:function(t,e){var r,n,i,c,l,h,p,f,d,v,g,y;return o(this,(function(o){switch(o.label){case 0:return r=this.liquid.renderer,i=ie,[4,Et(this.collection,t)];case 1:return(n=i.apply(void 0,[o.sent()])).length?[3,3]:[4,r.renderTemplates(this.elseTemplates,t,e)];case 2:return o.sent(),[2];case 3:return[4,this.hash.render(t)];case 4:c=o.sent(),l=this.liquid.options.orderedFilterParameters?Object.keys(c).filter((function(t){return ue.includes(t)})):ue.filter((function(t){return void 0!==c[t]})),n=l.reduce((function(t,e){return"offset"===e?(r=t,n=c.offset,r.slice(n)):"limit"===e?function(t,e){return t.slice(0,e)}(t,c.limit):function(t){return u([],a(t),!1).reverse()}(t);var r,n}),n),h={forloop:new ae(n.length,this.collection.getText(),this.variable)},t.push(h),o.label=5;case 5:o.trys.push([5,10,11,12]),p=s(n),f=p.next(),o.label=6;case 6:return f.done?[3,9]:(d=f.value,h[this.variable]=d,[4,r.renderTemplates(this.templates,t,e)]);case 7:if(o.sent(),e.break)return e.break=!1,[3,9];e.continue=!1,h.forloop.next(),o.label=8;case 8:return f=p.next(),[3,6];case 9:return[3,12];case 10:return v=o.sent(),g={error:v},[3,12];case 11:try{f&&!f.done&&(y=p.return)&&y.call(p)}finally{if(g)throw g.error}return[7];case 12:return t.pop(),[2]}}))}},le={parse:function(t,e){var r=this,n=new Jt(t.args,this.liquid.options.operatorsTrie);this.variable=function(t){var e=t.readIdentifier().content;if(e)return e;var r=t.readQuoted();return r?Pt(r):void 0}(n),this.templates=[];var i=this.liquid.parser.parseStream(e);i.on("tag:endcapture",(function(){return i.stop()})).on("template",(function(t){return r.templates.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))})),i.start()},render:function(t){var e;return o(this,(function(r){switch(r.label){case 0:return[4,this.liquid.renderer.renderTemplates(this.templates,t)];case 1:return e=r.sent(),t.bottom()[this.variable]=e,[2]}}))}},he={parse:function(t,e){var r=this;this.cond=new Xt(t.args,this.liquid),this.cases=[],this.elseTemplates=[];var n=[],i=this.liquid.parser.parseStream(e).on("tag:when",(function(t){n=[];for(var e=new Jt(t.args,r.liquid.options.operatorsTrie);!e.end();){var i=e.readValue();r.cases.push({val:i,templates:n}),e.readTo(",")}})).on("tag:else",(function(){return n=r.elseTemplates})).on("tag:endcase",(function(){return i.stop()})).on("template",(function(t){return n.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))}));i.start()},render:function(t,e){var r,n,i,a,u,c,l,h,p;return o(this,(function(o){switch(o.label){case 0:return r=this.liquid.renderer,i=v,[4,this.cond.value(t,t.opts.lenientIf)];case 1:n=i.apply(void 0,[o.sent()]),o.label=2;case 2:o.trys.push([2,7,8,9]),a=s(this.cases),u=a.next(),o.label=3;case 3:return u.done?[3,6]:Et((c=u.value).val,t,t.opts.lenientIf)!==n?[3,5]:[4,r.renderTemplates(c.templates,t,e)];case 4:return o.sent(),[2];case 5:return u=a.next(),[3,3];case 6:return[3,9];case 7:return l=o.sent(),h={error:l},[3,9];case 8:try{u&&!u.done&&(p=a.return)&&p.call(a)}finally{if(h)throw h.error}return[7];case 9:return[4,r.renderTemplates(this.elseTemplates,t,e)];case 10:return o.sent(),[2]}}))}},pe={parse:function(t,e){var r=this.liquid.parser.parseStream(e);r.on("token",(function(t){"endcomment"===t.name&&r.stop()})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))})),r.start()}};!function(t){t[t.OUTPUT=0]="OUTPUT",t[t.STORE=1]="STORE"}(se||(se={}));var fe=se,de={parseFilePath:ve,renderFilePath:ge,parse:function(t){var e=t.args,r=new Jt(e,this.liquid.options.operatorsTrie);for(this.file=this.parseFilePath(r,this.liquid),this.currentFile=t.file;!r.end();){r.skipBlank();var n=r.p,i=r.readIdentifier();if(("with"===i.content||"for"===i.content)&&(r.skipBlank(),":"!==r.peek())){var o=r.readValue();if(o){var s=r.p,a=void 0;"as"===r.readIdentifier().content?a=r.readIdentifier():r.p=s,this[i.content]={value:o,alias:a&&a.content},r.skipBlank(),","===r.peek()&&r.advance();continue}}r.p=n;break}this.hash=new $t(r.remaining())},render:function(t,e){var r,i,a,u,c,l,h,p,f,d,v,g,y,m,w,b,T,k,x,O;return o(this,(function(o){switch(o.label){case 0:return i=(r=this).liquid,a=r.hash,[4,this.renderFilePath(this.file,t,i)];case 1:return u=o.sent(),c=new W({},t.opts,{sync:t.sync,globals:t.globals,strictVariables:t.strictVariables}),l=c.bottom(),h=n,p=[l],[4,a.render(t)];case 2:if(h.apply(void 0,p.concat([o.sent()])),this.with&&(f=this.with,v=f.value,g=f.alias,l[g||u]=Et(v,t)),!this.for)return[3,12];d=this.for,v=d.value,g=d.alias,y=ie(y=Et(v,t)),l.forloop=new ae(y.length,v.getText(),g),o.label=3;case 3:o.trys.push([3,9,10,11]),m=s(y),w=m.next(),o.label=4;case 4:return w.done?[3,8]:(b=w.value,l[g]=b,[4,i._parsePartialFile(u,c.sync,this.currentFile)]);case 5:return k=o.sent(),[4,i.renderer.renderTemplates(k,c,e)];case 6:o.sent(),l.forloop.next(),o.label=7;case 7:return w=m.next(),[3,4];case 8:return[3,11];case 9:return T=o.sent(),x={error:T},[3,11];case 10:try{w&&!w.done&&(O=m.return)&&O.call(m)}finally{if(x)throw x.error}return[7];case 11:return[3,15];case 12:return[4,i._parsePartialFile(u,c.sync,this.currentFile)];case 13:return k=o.sent(),[4,i.renderer.renderTemplates(k,c,e)];case 14:o.sent(),o.label=15;case 15:return[2]}}))}};function ve(t,e){if(e.options.dynamicPartials){var r=t.readValue();if(void 0===r)throw new TypeError('illegal argument "'.concat(t.input,'"'));if("none"===r.getText())return null;if(lt(r)){var n=e.parse(Pt(r));return 1===n.length&&at(n[0].token)?n[0].token.getContent():n}return r}var i=t.readFileName().getText();return"none"===i?null:i}function ge(t,e,r){return"string"==typeof t?t:Array.isArray(t)?r.renderer.renderTemplates(t,e):Et(t,e)}var ye={parseFilePath:ve,renderFilePath:ge,parse:function(t){var e=t.args,r=new Jt(e,this.liquid.options.operatorsTrie);this.file=this.parseFilePath(r,this.liquid),this.currentFile=t.file;var n=r.p;"with"===r.readIdentifier().content?(r.skipBlank(),":"!==r.peek()?this.withVar=r.readValue():r.p=n):r.p=n,this.hash=new $t(r.remaining())},render:function(t,e){var r,n,i,s,a,u,c,l,h;return o(this,(function(o){switch(o.label){case 0:return n=(r=this).liquid,i=r.hash,s=r.withVar,a=n.renderer,[4,this.renderFilePath(this.file,t,n)];case 1:return u=o.sent(),c=t.saveRegister("blocks","blockMode"),t.setRegister("blocks",{}),t.setRegister("blockMode",fe.OUTPUT),[4,i.render(t)];case 2:return l=o.sent(),s&&(l[u]=Et(s,t)),[4,n._parsePartialFile(u,t.sync,this.currentFile)];case 3:return h=o.sent(),t.push(l),[4,a.renderTemplates(h,t,e)];case 4:return o.sent(),t.pop(),t.restoreRegister(c),[2]}}))}},me={parse:function(t){var e=new Jt(t.args,this.liquid.options.operatorsTrie);this.variable=e.readIdentifier().content},render:function(t,e){var r=t.environments;g(r[this.variable])||(r[this.variable]=0),e.write(d(--r[this.variable]))}},we={parse:function(t){var e=new Jt(t.args,this.liquid.options.operatorsTrie),r=e.readValue();for(e.skipBlank(),this.candidates=[],r&&(":"===e.peek()?(this.group=r,e.advance()):this.candidates.push(r));!e.end();){var n=e.readValue();n&&this.candidates.push(n),e.readTo(",")}},render:function(t,e){var r=Et(this.group,t),n="cycle:".concat(r,":")+this.candidates.join(","),i=t.getRegister("cycle"),o=i[n];void 0===o&&(o=i[n]=0);var s=this.candidates[o];o=(o+1)%this.candidates.length,i[n]=o;var a=Et(s,t);e.write(a)}},be={parse:function(t,e){var r,n=this;this.branches=[],this.elseTemplates=[],this.liquid.parser.parseStream(e).on("start",(function(){return n.branches.push({predicate:new Xt(t.args,n.liquid),templates:r=[]})})).on("tag:elsif",(function(t){return n.branches.push({predicate:new Xt(t.args,n.liquid),templates:r=[]})})).on("tag:else",(function(){return r=n.elseTemplates})).on("tag:endif",(function(){this.stop()})).on("template",(function(t){return r.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))})).start()},render:function(t,e){var r,n,i,a,u,c,l,h,p;return o(this,(function(o){switch(o.label){case 0:r=this.liquid.renderer,o.label=1;case 1:o.trys.push([1,7,8,9]),n=s(this.branches),i=n.next(),o.label=2;case 2:return i.done?[3,6]:(a=i.value,u=a.predicate,c=a.templates,[4,u.value(t,t.opts.lenientIf)]);case 3:return M(o.sent(),t)?[4,r.renderTemplates(c,t,e)]:[3,5];case 4:return o.sent(),[2];case 5:return i=n.next(),[3,2];case 6:return[3,9];case 7:return l=o.sent(),h={error:l},[3,9];case 8:try{i&&!i.done&&(p=n.return)&&p.call(n)}finally{if(h)throw h.error}return[7];case 9:return[4,r.renderTemplates(this.elseTemplates,t,e)];case 10:return o.sent(),[2]}}))}},Te={parse:function(t){var e=new Jt(t.args,this.liquid.options.operatorsTrie);this.variable=e.readIdentifier().content},render:function(t,e){var r=t.environments;g(r[this.variable])||(r[this.variable]=0);var n=r[this.variable];r[this.variable]++,e.write(d(n))}},ke={parseFilePath:ve,renderFilePath:ge,parse:function(t,e){var r=new Jt(t.args,this.liquid.options.operatorsTrie);this.file=this.parseFilePath(r,this.liquid),this.currentFile=t.file,this.hash=new $t(r.remaining()),this.tpls=this.liquid.parser.parseTokens(e)},render:function(t,e){var r,n,i,s,a,u,c,l,h,p,f;return o(this,(function(o){switch(o.label){case 0:return n=(r=this).liquid,i=r.hash,s=r.file,a=n.renderer,null!==s?[3,2]:(t.setRegister("blockMode",fe.OUTPUT),[4,a.renderTemplates(this.tpls,t,e)]);case 1:return o.sent(),[2];case 2:return[4,this.renderFilePath(this.file,t,n)];case 3:return u=o.sent(),[4,n._parseLayoutFile(u,t.sync,this.currentFile)];case 4:return c=o.sent(),t.setRegister("blockMode",fe.STORE),[4,a.renderTemplates(this.tpls,t)];case 5:return l=o.sent(),void 0===(h=t.getRegister("blocks"))[""]&&(h[""]=function(t,e){return e.write(l)}),t.setRegister("blockMode",fe.OUTPUT),f=(p=t).push,[4,i.render(t)];case 6:return f.apply(p,[o.sent()]),[4,a.renderTemplates(c,t,e)];case 7:return o.sent(),t.pop(),[2]}}))}},xe=function(t){function e(e){void 0===e&&(e=function(){return""});var r=t.call(this)||this;return r.superBlockRender=e,r}return r(e,t),e.prototype.super=function(){return this.superBlockRender()},e}(c),Oe={parse:function(t,e){var r=this,n=/\w+/.exec(t.args);this.block=n?n[0]:"",this.tpls=[],this.liquid.parser.parseStream(e).on("tag:endblock",(function(){this.stop()})).on("template",(function(t){return r.tpls.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))})).start()},render:function(t,e){var r;return o(this,(function(n){switch(n.label){case 0:return r=this.getBlockRender(t),t.getRegister("blockMode")!==fe.STORE?[3,1]:(t.getRegister("blocks")[this.block]=r,[3,3]);case 1:return[4,r(new xe,e)];case 2:n.sent(),n.label=3;case 3:return[2]}}))},getBlockRender:function(t){var e=this.liquid,r=this.tpls,n=t.getRegister("blocks")[this.block],i=function(n,i){return o(this,(function(o){switch(o.label){case 0:return t.push({block:n}),[4,e.renderer.renderTemplates(r,t,i)];case 1:return o.sent(),t.pop(),[2]}}))};return n?function(t,e){return n(new xe((function(){return i(t,e)})),e)}:i}},qe={parse:function(t,e){var r=this;this.tokens=[];var n=this.liquid.parser.parseStream(e);n.on("token",(function(t){"endraw"===t.name?n.stop():r.tokens.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))})),n.start()},render:function(){return this.tokens.map((function(t){return t.getText()})).join("")}},Se=function(t){function e(e,r,n,i){var o=t.call(this,e,n,i)||this;return o.length=e,o.cols=r,o}return r(e,t),e.prototype.row=function(){return Math.floor(this.i/this.cols)+1},e.prototype.col0=function(){return this.i%this.cols},e.prototype.col=function(){return this.col0()+1},e.prototype.col_first=function(){return 0===this.col0()},e.prototype.col_last=function(){return this.col()===this.cols},e}(ae),Fe={assign:ne,for:ce,capture:le,case:he,comment:pe,include:ye,render:de,decrement:me,increment:Te,cycle:we,if:be,layout:ke,block:Oe,raw:qe,tablerow:{parse:function(t,e){var r,n=this,i=new Jt(t.args,this.liquid.options.operatorsTrie),o=i.readIdentifier();i.skipBlank(),i.readIdentifier(),this.variable=o.content,this.collection=i.readValue(),this.hash=new $t(i.remaining()),this.templates=[];var s=this.liquid.parser.parseStream(e).on("start",(function(){return r=n.templates})).on("tag:endtablerow",(function(){return s.stop()})).on("template",(function(t){return r.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))}));s.start()},render:function(t,e){var r,n,i,s,a,u,c,l,h,p;return o(this,(function(o){switch(o.label){case 0:return n=ie,[4,Et(this.collection,t)];case 1:return r=n.apply(void 0,[o.sent()]),[4,this.hash.render(t)];case 2:i=o.sent(),s=i.offset||0,a=void 0===i.limit?r.length:i.limit,r=r.slice(s,s+a),u=i.cols||r.length,c=this.liquid.renderer,l=new Se(r.length,u,this.collection.getText(),this.variable),h={tablerowloop:l},t.push(h),p=0,o.label=3;case 3:return p<r.length?(h[this.variable]=r[p],0===l.col0()&&(1!==l.row()&&e.write("</tr>"),e.write('<tr class="row'.concat(l.row(),'">'))),e.write('<td class="col'.concat(l.col(),'">')),[4,c.renderTemplates(this.templates,t,e)]):[3,6];case 4:o.sent(),e.write("</td>"),o.label=5;case 5:return p++,l.next(),[3,3];case 6:return r.length&&e.write("</tr>"),t.pop(),[2]}}))}},unless:{parse:function(t,e){var r,n=this;this.branches=[],this.elseTemplates=[],this.liquid.parser.parseStream(e).on("start",(function(){return n.branches.push({predicate:new Xt(t.args,n.liquid),test:N,templates:r=[]})})).on("tag:elsif",(function(t){return n.branches.push({predicate:new Xt(t.args,n.liquid),test:M,templates:r=[]})})).on("tag:else",(function(){return r=n.elseTemplates})).on("tag:endunless",(function(){this.stop()})).on("template",(function(t){return r.push(t)})).on("end",(function(){throw new Error("tag ".concat(t.getText()," not closed"))})).start()},render:function(t,e){var r,n,i,a,u,c,l,h,p,f,d;return o(this,(function(o){switch(o.label){case 0:r=this.liquid.renderer,o.label=1;case 1:o.trys.push([1,7,8,9]),n=s(this.branches),i=n.next(),o.label=2;case 2:return i.done?[3,6]:(a=i.value,u=a.predicate,c=a.test,l=a.templates,[4,u.value(t,t.opts.lenientIf)]);case 3:return h=o.sent(),c(h,t)?[4,r.renderTemplates(l,t,e)]:[3,5];case 4:return o.sent(),[2];case 5:return i=n.next(),[3,2];case 6:return[3,9];case 7:return p=o.sent(),f={error:p},[3,9];case 8:try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}return[7];case 9:return[4,r.renderTemplates(this.elseTemplates,t,e)];case 10:return o.sent(),[2]}}))}},break:{render:function(t,e){e.break=!0}},continue:{render:function(t,e){e.continue=!0}}},Re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},Le={"&amp;":"&","&lt;":"<","&gt;":">","&#34;":'"',"&#39;":"'"};function Ee(t){return d(t).replace(/&|<|>|"|'/g,(function(t){return Re[t]}))}var Pe=Math.abs,De=Math.max,Me=Math.min,Ne=Math.ceil,_e=Math.floor,Ae=/%([-_0^#:]+)?(\d+)?([EO])?(.)/,ze=["January","February","March","April","May","June","July","August","September","October","November","December"],je=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ie=ze.map(Ce),Ve=je.map(Ce),Be={1:"st",2:"nd",3:"rd",default:"th"};function Ce(t){return t.slice(0,3)}function He(t){return[31,function(t){var e=t.getFullYear();return!(0!=(3&e)||!(e%100||e%400==0&&e))}(t)?29:28,31,30,31,30,31,31,30,31,30,31]}function Ke(t){for(var e=0,r=0;r<t.getMonth();++r)e+=He(t)[r];return e+t.getDate()}function Ue(t,e){var r=Ke(t)+(e-t.getDay()),n=7-new Date(t.getFullYear(),0,1).getDay()+e;return String(Math.floor((r-n)/7)+1)}var Qe={d:2,e:2,H:2,I:2,j:3,k:2,l:2,L:3,m:2,M:2,S:2,U:2,W:2},We={a:" ",A:" ",b:" ",B:" ",c:" ",e:" ",k:" ",l:" ",p:" ",P:" "},Je={a:function(t){return Ve[t.getDay()]},A:function(t){return je[t.getDay()]},b:function(t){return Ie[t.getMonth()]},B:function(t){return ze[t.getMonth()]},c:function(t){return t.toLocaleString()},C:function(t){return function(t){return parseInt(t.getFullYear().toString().substring(0,2),10)}(t)},d:function(t){return t.getDate()},e:function(t){return t.getDate()},H:function(t){return t.getHours()},I:function(t){return String(t.getHours()%12||12)},j:function(t){return Ke(t)},k:function(t){return t.getHours()},l:function(t){return String(t.getHours()%12||12)},L:function(t){return t.getMilliseconds()},m:function(t){return t.getMonth()+1},M:function(t){return t.getMinutes()},N:function(t,e){var r,n,i=Number(e.width)||9;return r=String(t.getMilliseconds()).substr(0,i),void 0===(n="0")&&(n=" "),O(r,i,n,(function(t,e){return t+e}))},p:function(t){return t.getHours()<12?"AM":"PM"},P:function(t){return t.getHours()<12?"am":"pm"},q:function(t){return function(t){var e=t.getDate().toString(),r=parseInt(e.slice(-1));return Be[r]||Be.default}(t)},s:function(t){return Math.round(t.getTime()/1e3)},S:function(t){return t.getSeconds()},u:function(t){return t.getDay()||7},U:function(t){return Ue(t,0)},w:function(t){return t.getDay()},W:function(t){return Ue(t,1)},x:function(t){return t.toLocaleDateString()},X:function(t){return t.toLocaleTimeString()},y:function(t){return t.getFullYear().toString().substring(2,4)},Y:function(t){return t.getFullYear()},z:function(t,e){var r=Math.abs(t.getTimezoneOffset()),n=Math.floor(r/60),i=r%60;return(t.getTimezoneOffset()>0?"-":"+")+x(n,2,"0")+(e.flags[":"]?":":"")+x(i,2,"0")},t:function(){return"\t"},n:function(){return"\n"},"%":function(){return"%"}};function Ye(t,e){var r,n,i=a(e,5),o=i[0],c=i[1],l=void 0===c?"":c,h=i[2],p=i[3],f=i[4],d=Je[f];if(!d)return o;var v={};try{for(var g=s(l),y=g.next();!y.done;y=g.next())v[y.value]=!0}catch(k){r={error:k}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}var m,w=String(d(t,{flags:v,width:h,modifier:p})),b=We[f]||"0",T=h||Qe[f]||0;return v["^"]?w=w.toUpperCase():v["#"]&&(w=u([],a(m=w),!1).some((function(t){return t>="a"&&t<="z"}))?m.toUpperCase():m.toLowerCase()),v._?b=" ":v[0]&&(b="0"),v["-"]&&(T=0),x(w,T,b)}Je.h=Je.b;var $e=(new Date).getTimezoneOffset(),Ge=/([zZ]|([+-])(\d{2}):(\d{2}))$/,Xe=function(){function t(e,r){if(e instanceof t)this.date=e.date,r=e.timezoneOffset;else{var n=6e4*($e-r),i=new Date(e).getTime()+n;this.date=new Date(i)}this.timezoneOffset=r}return t.prototype.getTime=function(){return this.date.getTime()},t.prototype.getMilliseconds=function(){return this.date.getMilliseconds()},t.prototype.getSeconds=function(){return this.date.getSeconds()},t.prototype.getMinutes=function(){return this.date.getMinutes()},t.prototype.getHours=function(){return this.date.getHours()},t.prototype.getDay=function(){return this.date.getDay()},t.prototype.getDate=function(){return this.date.getDate()},t.prototype.getMonth=function(){return this.date.getMonth()},t.prototype.getFullYear=function(){return this.date.getFullYear()},t.prototype.toLocaleTimeString=function(t){return this.date.toLocaleTimeString(t)},t.prototype.toLocaleDateString=function(t){return this.date.toLocaleDateString(t)},t.prototype.getTimezoneOffset=function(){return this.timezoneOffset},t.createDateFixedToTimezone=function(e){var r=e.match(Ge);if(r&&"Z"===r[1])return new t(+new Date(e),0);if(r&&r[2]&&r[3]&&r[4]){var n=a(r,5),i=n[2],o=n[3],s=n[4],u=("+"===i?-1:1)*(60*parseInt(o,10)+parseInt(s,10));return new t(+new Date(e),u)}return new Date(e)},t}(),Ze=Object.freeze({__proto__:null,escape:Ee,escapeOnce:function(t){return Ee(function(t){return String(t).replace(/&(amp|lt|gt|#34|#39);/g,(function(t){return Le[t]}))}(t))},newlineToBr:function(t){return t.replace(/\n/g,"<br />\n")},stripHtml:function(t){return t.replace(/<script.*?<\/script>|<!--.*?-->|<style.*?<\/style>|<.*?>/g,"")},abs:Pe,atLeast:De,atMost:Me,ceil:Ne,dividedBy:function(t,e){return t/e},floor:_e,minus:function(t,e){return t-e},modulo:function(t,e){return t%e},times:function(t,e){return t*e},round:function(t,e){void 0===e&&(e=0);var r=Math.pow(10,e);return Math.round(t*r)/r},plus:function(t,e){return Number(t)+Number(e)},sortNatural:function(t,e){return t&&t.sort?void 0!==e?u([],a(t),!1).sort((function(t,r){return F(t[e],r[e])})):u([],a(t),!1).sort(F):[]},urlDecode:function(t){return t.split("+").map(decodeURIComponent).join(" ")},urlEncode:function(t){return t.split(" ").map(encodeURIComponent).join("+")},join:function(t,e){return t.join(void 0===e?" ":e)},last:function(t){return m(t)?b(t):""},first:function(t){return m(t)?t[0]:""},reverse:function(t){return u([],a(t),!1).reverse()},sort:function(t,e){var r=this,n=function(t){return e?r.context.getFromScope(t,e.split(".")):t};return oe(t).sort((function(t,e){return(t=n(t))<(e=n(e))?-1:t>e?1:0}))},size:function(t){return t&&t.length||0},map:function(t,e){var r=this;return oe(t).map((function(t){return r.context.getFromScope(t,e.split("."))}))},compact:function(t){return oe(t).filter((function(t){return!y(t)}))},concat:function(t,e){return oe(t).concat(e)},slice:function(t,e,r){return void 0===r&&(r=1),e=e<0?t.length+e:e,t.slice(e,e+r)},where:function(t,e,r){var n=this;return oe(t).filter((function(t){var i=n.context.getFromScope(t,String(e).split("."));return void 0===r?M(i,n.context):i===r}))},uniq:function(t){var e={};return(t||[]).filter((function(t){return!e.hasOwnProperty(String(t))&&(e[String(t)]=!0,!0)}))},date:function(t,e){var r,n=this.context.opts;return function(t){return(t instanceof Date||t instanceof Xe)&&!isNaN(t.getTime())}(r="now"===t||"today"===t?new Date:g(t)?new Date(1e3*t):p(t)?/^\d+$/.test(t)?new Date(1e3*+t):n.preserveTimezones?Xe.createDateFixedToTimezone(t):new Date(t):t)?(n.hasOwnProperty("timezoneOffset")&&(r=new Xe(r,n.timezoneOffset)),function(t,e){for(var r,n="",i=e;r=Ae.exec(i);)n+=i.slice(0,r.index),i=i.slice(r.index+r[0].length),n+=Ye(t,r);return n+i}(r,e)):t},Default:function(t,e){return m(t)||p(t)?t.length?t:e:N(v(t),this.context)?e:t},json:function(t){return JSON.stringify(t)},append:function(t,e){return d(t)+d(e)},prepend:function(t,e){return d(e)+d(t)},lstrip:function(t){return d(t).replace(/^\s+/,"")},downcase:function(t){return d(t).toLowerCase()},upcase:function(t){return d(t).toUpperCase()},remove:function(t,e){return d(t).split(String(e)).join("")},removeFirst:function(t,e){return d(t).replace(String(e),"")},rstrip:function(t){return d(t).replace(/\s+$/,"")},split:function(t,e){return d(t).split(String(e))},strip:function(t){return d(t).trim()},stripNewlines:function(t){return d(t).replace(/\n/g,"")},capitalize:function(t){return(t=d(t)).charAt(0).toUpperCase()+t.slice(1).toLowerCase()},replace:function(t,e,r){return d(t).split(String(e)).join(r)},replaceFirst:function(t,e,r){return d(t).replace(String(e),r)},truncate:function(t,e,r){return void 0===e&&(e=50),void 0===r&&(r="..."),(t=d(t)).length<=e?t:t.substr(0,e-r.length)+r},truncatewords:function(t,e,r){void 0===e&&(e=15),void 0===r&&(r="...");var n=t.split(/\s+/),i=n.slice(0,e).join(" ");return n.length>=e&&(i+=r),i}}),tr=function(){function t(){this.impls={}}return t.prototype.get=function(t){return this.impls[t]},t.prototype.set=function(t,e){this.impls[t]=e},t}(),er=function(){function t(t,e){this.strictFilters=t,this.liquid=e,this.impls={}}return t.prototype.get=function(t){return this.impls[t]},t.prototype.set=function(t,e){this.impls[t]=e},t.prototype.create=function(t,e){return new Gt(t,this.get(t),e,this.liquid)},t}(),rr=function(){function t(t){var e=this;void 0===t&&(t={}),this.options=function(t){if(t.hasOwnProperty("operators")&&(t.operatorsTrie=z(t.operators)),t.hasOwnProperty("root")&&(t.hasOwnProperty("partials")||(t.partials=t.root),t.hasOwnProperty("layouts")||(t.layouts=t.root)),t.hasOwnProperty("cache")){var e;e="number"==typeof t.cache?t.cache>0?new L(t.cache):void 0:"object"==typeof t.cache?t.cache:t.cache?new L(1024):void 0,t.cache=e}return!(t=n(n({},j),t)).fs.dirname&&t.relativeReference&&(console.warn("[LiquidJS] `fs.dirname` is required for relativeReference, set relativeReference to `false` to suppress this warning, or provide implementation for `fs.dirname`"),t.relativeReference=!1),t.root=I(t.root),t.partials=I(t.partials),t.layouts=I(t.layouts),t}(t),this.parser=new re(this),this.renderer=new it,this.filters=new er(this.options.strictFilters,this),this.tags=new tr,w(Fe,(function(t,r){return e.registerTag(S(r),t)})),w(Ze,(function(t,r){return e.registerFilter(S(r),t)}))}return t.prototype.parse=function(t,e){return this.parser.parse(t,e)},t.prototype._render=function(t,e,r){var n=new W(e,this.options,r);return this.renderer.renderTemplates(t,n)},t.prototype.render=function(t,e,r){return i(this,void 0,void 0,(function(){return o(this,(function(i){return[2,tt(this._render(t,e,n(n({},r),{sync:!1})))]}))}))},t.prototype.renderSync=function(t,e,r){return et(this._render(t,e,n(n({},r),{sync:!0})))},t.prototype.renderToNodeStream=function(t,e,r){void 0===r&&(r={});var n=new W(e,this.options,r);return this.renderer.renderTemplatesToNodeStream(t,n)},t.prototype._parseAndRender=function(t,e,r){var n=this.parse(t);return this._render(n,e,r)},t.prototype.parseAndRender=function(t,e,r){return i(this,void 0,void 0,(function(){return o(this,(function(i){return[2,tt(this._parseAndRender(t,e,n(n({},r),{sync:!1})))]}))}))},t.prototype.parseAndRenderSync=function(t,e,r){return et(this._parseAndRender(t,e,n(n({},r),{sync:!0})))},t.prototype._parsePartialFile=function(t,e,r){return this.parser.parseFile(t,e,V.Partials,r)},t.prototype._parseLayoutFile=function(t,e,r){return this.parser.parseFile(t,e,V.Layouts,r)},t.prototype.parseFile=function(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return[2,tt(this.parser.parseFile(t,!1))]}))}))},t.prototype.parseFileSync=function(t){return et(this.parser.parseFile(t,!0))},t.prototype.renderFile=function(t,e,r){return i(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return[4,this.parseFile(t)];case 1:return n=i.sent(),[2,this.render(n,e,r)]}}))}))},t.prototype.renderFileSync=function(t,e,r){var n=this.parseFileSync(t);return this.renderSync(n,e,r)},t.prototype.renderFileToNodeStream=function(t,e,r){return i(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return[4,this.parseFile(t)];case 1:return n=i.sent(),[2,this.renderToNodeStream(n,e,r)]}}))}))},t.prototype._evalValue=function(t,e){return new Xt(t,this).value(e,!1)},t.prototype.evalValue=function(t,e){return i(this,void 0,void 0,(function(){return o(this,(function(r){return[2,tt(this._evalValue(t,e))]}))}))},t.prototype.evalValueSync=function(t,e){return et(this._evalValue(t,e))},t.prototype.registerFilter=function(t,e){this.filters.set(t,e)},t.prototype.registerTag=function(t,e){this.tags.set(t,e)},t.prototype.plugin=function(e){return e.call(this,t)},t.prototype.express=function(){var t=this,e=!0;return function(r,n,i){var o,s,c;if(e){e=!1;var l=I(this.root);(o=t.options.root).unshift.apply(o,u([],a(l),!1)),(s=t.options.layouts).unshift.apply(s,u([],a(l),!1)),(c=t.options.partials).unshift.apply(c,u([],a(l),!1))}t.renderFile(r,n).then((function(t){return i(null,t)}),i)}},t}();t.Liquid=rr,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof r.exports?e(r.exports):e((t="undefined"!=typeof globalThis?globalThis:t||self).liquidjs={}),r=r.exports;const{Liquid:n}=r,{Localizer:i}={Localizer:function(t){this.registerTag("t",{parse:function(t,e){this.str=t.args},render:async function(t){let e=await this.liquid.evalValue(this.str,t);return t&&t.environments&&t.environments.localizer&&t.environments.localizer.get?t.environments.localizer.get(e):e}})}};return{async toDocumentDefinition(t,e){const r=new n;r.plugin(i);const o=await r.parseAndRender(t,e);return JSON.parse(o)}}}));